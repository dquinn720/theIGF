{% extends "layout.html" %}
{% block title %}Past Draft Boards{% endblock %}
{% block content %}

    <div class="container">

        <form action="{{ url_for('past')}}" method="post">
        <label for="draftYear">Draft Year:</label>
            <select name="dYear">
	      {% for y in years %}
    		<option value="{{ y }}">{{ y }}</option>
  	      {% endfor %}
	    </select>
        
        <label for="tournament">Tournament:</label>
            <select name="tourney">
              <option value="The Masters">The Masters</option>
              <option value="PGA Championship">PGA Championship</option>
              <option value="THE PLAYERS Championship">THE PLAYERS Chapionship</option>
              <option value="U.S. Open">U.S. Open</option>
              <option value="The Open Championship">The Open Championship</option>
            </select>
        <button type="submit">Get Board</button>
        
     </div>  
     <br>
     <p><strong> {{ board_string | safe}}</strong></p>
        <p><strong>IGF Leaderboard:</strong></p>
          <div>
              <table class="sortable">
                  <tr>
                      {% for header in igf_leaderboard_heads %}
                      <th> {{header | safe}} </th>
                      {% endfor%}
                  </tr>
                  {% for row in igf_data %}
                    <tr>
			  {% set rowloop = loop %}
                      {% for cell in row %}
                      {% if loop.index0 == 0 %}
                        <td>
                          <a href="{{ url_for('igf_profile', igf_name=cell) }}" class="igf-link">
                            <img src="{{ url_for('static', filename='images/igf/' ~ (cell|igf_image_name) ~ '.png') }}" 
                                 alt="{{ cell }}" 
                                 class="igf-avatar"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';">
                            <span class="igf-avatar-placeholder" style="display:none;">{{ cell[0] }}</span>
                            {{ cell | safe }}
                          </a>
                        </td>
                      {% elif loop.index > 2 %}
                        {% set dg_id = igf_data_dg[rowloop.index0][loop.index0]|string %}
                        <td>
                          <a href="{{ url_for('golfer_profile', dg_id=dg_id) }}" class="golfer-link">
                            <img src="{{ url_for('static', filename='images/' ~ dg_id ~ '.png') }}" 
                                 class="golfer-avatar"
                                 onerror="this.style.display='none';">
                            {{ cell | safe }}
                          </a>
                        </td>
				    {% else %}
					<td>{{ cell | safe}} </td>
				    {% endif %}
                      {% endfor %}
                  </tr>
                  {% endfor %}
             </table>
            </div>
<br>
        <p><strong> Final Leaderboard </strong></p>
          <div>
              <table class="sortable">
                  <tr>
                      {% for header in headings %}
                      <th> {{header | safe}} </th>
                      {% endfor%}
                  </tr>
                  {% for row in tournament_data %}
                  {% set dg_id = row[-1]|string|replace('.0','') %}
                  <tr>
                      {% for cell in row %}
				{% if loop.index == 1 %}
                      		<td>
                      		  <a href="{{ url_for('golfer_profile', dg_id=dg_id) }}" class="golfer-link">
                      		    <img src="{{ url_for('static', filename='images/' ~ dg_id ~ '.png') }}" 
                      		         class="golfer-avatar"
                      		         onerror="this.style.display='none';">
                      		    {{ cell | safe }}
                      		  </a>
                      		</td>
                      	{% elif loop.index0 == 1 %}
                        <td>
                          <a href="{{ url_for('igf_profile', igf_name=cell) }}" class="igf-link">
                            <img src="{{ url_for('static', filename='images/igf/' ~ (cell|igf_image_name) ~ '.png') }}" 
                                 alt="{{ cell }}" 
                                 class="igf-avatar"
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-flex';">
                            <span class="igf-avatar-placeholder" style="display:none;">{{ cell[0] }}</span>
                            {{ cell | safe }}
                          </a>
                        </td>
                      {% elif loop.last == False %}
						<td>{{ cell | safe}} </td>
			      {% endif %}
			    {% endfor %}
                  </tr>
                  {% endfor %}
             </table>
            </div>

{% endblock %}
